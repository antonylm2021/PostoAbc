CREATE DATABASE 'C:\ABC.FDB'
USER 'SYSDBA'
PASSWORD 'masterkey'
PAGE_SIZE = 4096;

CREATE TABLE ABASTECIMENTO (
  ID INTEGER NOT NULL,
  DATA DATE,
  VALOR FLOAT,
  LITROS DOUBLE PRECISION,
  ICMS FLOAT,
  ID_BOMBA INTEGER,
  TOTALICMS FLOAT,
  TOTALGERAL FLOAT);


ALTER TABLE ABASTECIMENTO ADD PRIMARY KEY (ID);

ALTER TABLE ABASTECIMENTO ADD CONSTRAINT ID_BOMBA FOREIGN KEY (ID_BOMBA) REFERENCES BOMBA(ID);


SET TERM ^ ;

CREATE TRIGGER BI_ABASTECIMENTO_ID FOR ABASTECIMENTO
ACTIVE BEFORE INSERT
POSITION 0
AS
BEGIN
  IF (NEW.ID IS NULL) THEN
      NEW.ID = GEN_ID(ABASTECIMENTO_ID_GEN, 1);
END^

SET TERM ; ^



CREATE TABLE BOMBA (
  ID INTEGER NOT NULL,
  ID_TANQUE INTEGER,
  DESCRICAO VARCHAR(100) CHARACTER SET WIN1251);


ALTER TABLE BOMBA ADD PRIMARY KEY (ID);

ALTER TABLE BOMBA ADD CONSTRAINT ID_TANQUE FOREIGN KEY (ID_TANQUE) REFERENCES TANQUE(ID);


SET TERM ^ ;

CREATE TRIGGER BI_BOMBA_ID FOR BOMBA
ACTIVE BEFORE INSERT
POSITION 0
AS
BEGIN
  IF (NEW.ID IS NULL) THEN
      NEW.ID = GEN_ID(BOMBA_ID_GEN, 1);
END^

SET TERM ; ^

CREATE TABLE TANQUE (
  ID INTEGER NOT NULL,
  DESCRICAO VARCHAR(100) CHARACTER SET WIN1251,
  LITROS DOUBLE PRECISION,
  DT_CAD DATE,
  DT_ATU DATE);


ALTER TABLE TANQUE ADD PRIMARY KEY (ID);


SET TERM ^ ;

CREATE TRIGGER BI_TANQUE_ID FOR TANQUE
ACTIVE BEFORE INSERT
POSITION 0
AS
BEGIN
  IF (NEW.ID IS NULL) THEN
      NEW.ID = GEN_ID(TANQUE_ID_GEN, 1);
END^

SET TERM ; ^




